<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clan War League Stats - Pussay Palace</title>
    <link rel="icon" type="image/png" href="https://api-assets.clashofclans.com/badges/512/Z4CSpLlobD7Xl40FZhCQ0BzvZUcAdLvBEBOavqiHN90.png">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@600;400&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../static/style.css">
</head>
<body>
    <div class="site-header">
        <img class="site-logo" src="https://api-assets.clashofclans.com/badges/512/Z4CSpLlobD7Xl40FZhCQ0BzvZUcAdLvBEBOavqiHN90.png" alt="Clan Logo">
        <span class="site-title">Clan War Progress - Pussay Palace</span>
        <button id="refresh-btn" class="refresh-btn pastel-red-title">
            &#x21bb; Refresh Data
        </button>
    </div>
    <div class="nav-bar">
        <nav>
            <a href="/">Home</a>
            <a href="/coming-soon">Full War Table</a>
            <a href="/coming-soon">Progress Graphs</a>
        </nav>
    </div>
    <main>
        {% block content %}{% endblock %}
    </main>
    <script>
        const backgrounds = [
            // "../static/images/clash-of-clans-wall-breaker-vs-barbarian-xkva5z9lcx4g23e9.webp",
            // "../static/images/hog rider 1.webp",
            // "../static/images/hog rider 2.webp",
            "https://images.alphacoders.com/782/782653.png",
            "https://wallpapercave.com/wp/wp14810994.webp",
            "https://wallpapercave.com/wp/wp14645871.jpg",
            
        ];
        const idx = Math.floor(Math.random() * backgrounds.length);
        document.body.style.backgroundImage = `url('${backgrounds[idx]}')`;

        document.getElementById('refresh-btn').onclick = function() {
        this.disabled = true;
        this.textContent = "Refreshing...";
        fetch('/refresh-data', { method: 'POST' })
            .then(response => response.json())
            .then(data => {
                this.textContent = data.message || "Refreshed!";
                setTimeout(() => {
                    this.textContent = "↻ Refresh Data";
                    this.disabled = false;
                    // Optionally, reload page if you want to see updated data
                    // location.reload();
                }, 1200);
            })
            .catch(() => {
                this.textContent = "Error!";
                setTimeout(() => {
                    this.textContent = "↻ Refresh Data";
                    this.disabled = false;
                }, 1200);
            });
        };
    </script>
</body>
</html>