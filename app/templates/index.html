<!DOCTYPE html>
<html lang="en">
<head></head>
<body>
    <page-layout title="Clan War League Stats - Pussay Palace" 
        favicon="https://api-assets.clashofclans.com/badges/512/Z4CSpLlobD7Xl40FZhCQ0BzvZUcAdLvBEBOavqiHN90.png"
        logo-url="https://api-assets.clashofclans.com/badges/512/Z4CSpLlobD7Xl40FZhCQ0BzvZUcAdLvBEBOavqiHN90.png"
        show-refresh="true">

        <div class="main-data-box">
            <section id="filters">
                <filter-dropdown filter-type="players" filter-label="Players" options='{{ all_players | tojson }}'></filter-dropdown>
                <filter-controls></filter-controls>
            </section>
        

        <hr>
        <!-- Add this temporarily to see what data you're getting -->
        
        {% if recent_stats|length > 0 %}
        <filterable-table
            table-id="recent-stats-table"
            title="Recent Clan War League Stats"
            columns='{{ recent_stats[0].keys() | list | tojson }}'
            data='{{ recent_stats | tojson }}'
            filter-column="0">
        </filterable-table>
        {% else %}
        <div style="text-align: center; padding: 20px; color: #999;">
            <a> No recent stats data available</a>
        </div>
        {% endif %}

        <hr>

        {% if all_time_stats and all_time_stats|length > 0 %}
        <filterable-table
            table-id="all-time-stats-table"
            title="All Time War Stats (Averaged)"
            columns='{{ all_time_stats[0].keys() | list | tojson }}'
            data='{{ all_time_stats | tojson }}'
            filter-column="0">
        </filterable-table>
        {% else %}
        <div style="text-align: center; padding: 20px; color: #999;">No all-time stats data available</div>
        {% endif %}
        </div>

    </page-layout>

    <script src="{{ url_for('static', filename='components.js') }}"></script>
</body>
</html>