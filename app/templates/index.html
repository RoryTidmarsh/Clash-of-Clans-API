{% extends "base.html" %}

{% block title %}Clan War League Stats - Pussay Palace{% endblock %}

{% block content %}
<div class="main-data-box">
    <section id="filters">
        <form method="get" action="/">
            <label for="season">Season:</label>
            <select name="season" id="season">
                {% for season in filters.seasons %}
                <option value="{{ season }}" {% if filters.selected_season == season %}selected{% endif %}>{{ season }}</option>
                {% endfor %}
            </select>
            <label for="player">Player:</label>
            <select name="player" id="player">
                <option value="">All</option>
                {% for player in filters.players %}
                <option value="{{ player }}" {% if filters.selected_player == player %}selected{% endif %}>{{ player }}</option>
                {% endfor %}
            </select>
            <button type="submit">Apply Filters</button>
        </form>
    </section>
    <hr>
    <section id="recent-war">
        <h2>Most Recent War Stats</h2>
        <table>
            <thead>
                <tr>
                    {% for column in recent_stats[0].keys() %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in recent_stats %}
                <tr>
                    {% for value in row.values() %}
                    <td>{{ value }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
    <hr>
    <section id="all-time">
        <h2>All Time War Stats</h2>
        <table>
            <thead>
                <tr>
                    {% for column in all_time_stats[0].keys() %}
                    <th>{{ column }}</th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in all_time_stats %}
                <tr>
                    {% for value in row.values() %}
                    <td>{{ value }}</td>
                    {% endfor %}
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</div>
{% endblock %}